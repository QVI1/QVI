<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/signup.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script type="text/javascript">
  </script>
  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
  <script type="text/javascript">
    (function(){
      // Source: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round

      /**
       * Decimal adjustment of a number.
       *
       * @param   {String}    type    The type of adjustment.
       * @param   {Number}    value   The number.
       * @param   {Integer}   exp     The exponent (the 10 logarithm of the adjustment base).
       * @returns {Number}            The adjusted value.
       */
      function decimalAdjust(type, value, exp) {
          // If the exp is undefined or zero...
          if (typeof exp === 'undefined' || +exp === 0) {
              return Math[type](value);
          }
          value = +value;
          exp = +exp;
          // If the value is not a number or the exp is not an integer...
          if (isNaN(value) || !(typeof exp === 'number' && exp % 1 === 0)) {
              return NaN;
          }
          // Shift
          value = value.toString().split('e');
          value = Math[type](+(value[0] + 'e' + (value[1] ? (+value[1] - exp) : -exp)));
          // Shift back
          value = value.toString().split('e');
          return +(value[0] + 'e' + (value[1] ? (+value[1] + exp) : exp));
      }

      // Decimal round
      if (!Math.round10) {
          Math.round10 = function(value, exp) {
              return decimalAdjust('round', value, exp);
          };
      }
      // Decimal floor
      if (!Math.floor10) {
          Math.floor10 = function(value, exp) {
              return decimalAdjust('floor', value, exp);
          };
      }
      // Decimal ceil
      if (!Math.ceil10) {
          Math.ceil10 = function(value, exp) {
              return decimalAdjust('ceil', value, exp);
          };
      }
    })();

    function calculateUtilisation() {
      var area = 0;
      var usable = 0;
      if(document.querySelector("#area_m").value !== "") {
        area = document.querySelector("#area_m").value;
      } else {
        area = document.querySelector("#area_ft").value;
      }
      if(document.querySelector("#usable_area_m").value !== "") {
        usable = document.querySelector("#usable_area_m").value;
      } else {
        usable = document.querySelector("#usable_area_ft").value;
      }
      utilisation = usable/area*100;
      utilisation = Math.round10(utilisation,-2);
      span = document.querySelector("#utilisation");
      while(span.firstChild) { span.removeChild(span.firstChild); }
      span.appendChild(document.createTextNode(utilisation));
      return false;
    }
  </script>
</head>
<body>
  <div class="col-md-4"></div>
  <div class="col-md-4">
    <h1>Company details</h1>
    <form method="post" action="" id="organisation">
      <fieldset>
        <legend>Organisation</legend>
        <div class="form-group">
          <label class="control-label" for="company_name"><span class="red">*</span> Company name:</label>
          <input type="text" class="form-control" name="company_name" required>
        </div>
        <div class="form-group">
          <label class="control-label" for="company_address"><span class="red">*</span> Company address:</label>
          <textarea class="form-control" name="company_address" required></textarea>
        </div>
        <div class="form-group">
          <label class="control-label" for="company_postcode"><span class="red">*</span> Post code:</label>
          <input type="text" class="form-control" name="company_postcode" required>
        </div>
        <div class="form-group">
          <label class="control-label" for="company_market_sector"><span class="red">*</span> Market sector:</label>
          <input type="text" class="form-control" name="company_market_sector" required>
        </div>
        <div class="form-group">
          <label class="control-label" for="company_contact_name"><span class="red">*</span> Contact Name:</label>
          <input type="text" class="form-control" name="company_contact_name" required>
        </div>
        <div class="form-group">
          <label class="control-label" for="company_contact_position">Position:</label>
          <input type="text" class="form-control" name="company_contact_position">
        </div>
        <div class="form-group">
          <label class="control-label" for="company_contactphone"><span class="red">*</span> Telephone number:</label>
          <input type="text" class="form-control" name="company_contactphone" required>
        </div>
        <div class="form-group">
          <label class="control-label" for="company_contactmail"><span class="red">*</span> E-mail address:</label>
          <input type="text" class="form-control" name="company_contactmail" required>
        </div>
        <div class="form-group">
          <label class="control-label" for="company_primary_facility_function">primary function of facility:</label>
          <textarea class="form-control" name="company_primary_facility_function"></textarea>
        </div>
        <div class="form-group">
          <label class="control-label" for="company_total_area_m">Total area in m<sup>2</sup>:</label>
          <input type="text" class="form-control" name="company_total_area_m" id="area_m">
        </div>
        <div class="form-group">
          <label class="control-label" for="company_total_area_ft">Total area in feet<sup>2</sup>:</label>
          <input type="text" class="form-control" name="company_total_area_ft" id="area_ft">
        </div>
        <div class="form-group">
          <label class="control-label" for="company_total_usable_area_m">Total usable area in m<sup>2</sup>:</label>
          <input type="text" class="form-control" name="company_total_usable_area_m" id="usable_area_m">
        </div>
        <div class="form-group">
          <label class="control-label" for="company_total_usable_area_ft">Total usable area in feet<sup>2</sup>:</label>
          <input type="text" class="form-control" name="company_total_usable_area_ft" id="usable_area_ft">
        </div>
        <div class="form-group">
          <label class="control-label" for="utilisation">Utilisation:</label> <span id="utilisation"></span>%
          <input type="hidden" name="utilisation">
          <button class="" onclick="calculateUtilisation();" type="button">Calculate</button>
        </div>
        <div class="form-group">
          <label class="control-label" for="company_amenities">Amenities:</label>
          <input type="text" class="form-control" name="company_amenities">
        </div>
        <div class="form-group">
          <label class="control-label" for="company_cellular_offices">Cellular offices:</label>
          <input type="text" class="form-control" name="company_cellular_offices"
        </div>
        <div class="form-group">
          <label class="control-label" for="company_open_plan_offices">Open plan offices:</label>
          <input type="text" class="form-control" name="company_open_plan_offices">
        </div>
        <div class="form-group">
          <label class="control-label" for="company_support_areas">Support areas:</label>
          <input type="text" class="form-control" name="company_support_areas">
        </div>
        <div class="form-group">
          <label class="control-label" for="company_service_areas">Service areas:</label>
          <input type="text" class="form-control" name="company_service_areas">
        </div>
        <div class="form-group">
          <label class="control-label" for="company_production_areas">Production Areas:</label>
          <input type="text" class="form-control" name="company_production_areas">
        </div>
        <div class="form-group">
          <button class="btn btn-primary" type="button" onclick="ajaxSave('organisation');">Save organisation</button>
        </div>
      </fieldset>
    </form>
    <form method="post" action="" id="tenure">
      <fieldset>
        <legend>Tenure</legend>
        <div class="form-group">
          <label class="control-label" for="tenure_freehold">Freehold:</label>
          <input type="text" class="form-control" name="tenure_freehold">
        </div>
        <div class="form-group">
          <label class="control-label" for="tenure_leasehold">Leasehold:</label>
          <input type="text" class="form-control" name="tenure_leasehold">
        </div>
        <div class="form-group">
  <!-- GET EXPLANATION FOR THIS -->
        <label class="control-label" for="tenure_leased">What proportion of the site is leased or let?</label>
        <div class="radio">
          <label class="radio"><input type="radio" name="tenure_leased" value="0"> None</label>
          <label class="radio"><input type="radio" name="tenure_leased" value="all_over_5"> All (> 5 years)</label>
          <label class="radio"><input type="radio" name="tenure_leased" value="all_under_5"> All (< 5 years)</label>
        </div>
        <input type="text" name="tenure_leased" placeholder="% of total area">
  <!-- GET EXPLANATION FOR THIS -->
        </div>
        <div class="form-group">
          <label class="control-label" for="tenure_facility_age">Age of the facility:</label>
          <input type="text" class="form-control" name="tenure_facility_age">
        </div>
        <div class="form-group">
          <label class="control-label" for="tenure_refurbish">Last refurbished (major):</label>
          <input type="text" class="form-control" name="tenure_refurbish" placeholder="Input year">
        </div>
        <div class="form-group>">
          <button class="btn btn-primary" type="button" onclick="ajaxSave('tenure');">Save tenure</button>
        </div>
      </fieldset>
    </form>
    <form method="post" action="" id="assessment">
      <fieldset>
        <legend>Facility Assessment</legend>
        <div class="form-group">
          <label class="control-label" for="assessment_FTE">Full time employees:</label>
          <input type="number" class="form-control" name="assessment_FTE">
        </div>
        <div class="form-group">
          <label class="control-label" for="assessment_function">What funtion is carried out at the facility?</label>
          <div class="radio">
            <label class="radio"><input type="radio" name="assessment_function" value="HQ_admin"> Headquarters/Admin</label>
            <label class="radio"><input type="radio" name="assessment_function" value="production"> Production</label>
            <label class="radio"><input type="radio" name="assessment_function" value="manufacturing"> Manufacturing</label>
            <label class="radio"><input type="radio" name="assessment_function" value="other"> Other</label>
          </div>
          <input type="text" class="form-control" name="assessment_function_other" placeholder="Specify other">
        </div>
        <div class="form-group">
          <label class="control-label" for="assessment_aircon_buildings">% of airconditioned buildings:</label>
          <input type="number" class="form-control" name="assessment_aircon_buildings">
        </div>
        <div class="form-group">
          <label class="control-label" for="assessment_floors">No. of floors/storeys:</label>
          <input type="number" class="form-control" name="assessment_floors">
        </div>
        <div class="form-group">
          <label class="control-label" for="assessment_setting">Facility setting:</label>
          <div class="radio">
            <label class="radio"><input type="radio" name="assessment_setting" value="business"> General business district</label>
            <label class="radio"><input type="radio" name="assessment_setting" value="suburb"> Suburban area</label>
            <label class="radio"><input type="radio" name="assessment_setting" value="rural"> Rural area</label>
          </div>
        </div>
        <div class="form-group">
          <label class="control-label" for="assessment_open_public">Open to general public?</label>
          <div class="radio">
            <label class="radio"><input type="radio" name="assessment_open_public" value="y"> Yes</label>
            <label class="radio"><input type="radio" name="assessment_open_public" value="n"> No</label>
          </div>
        </div>
        <div class="form-group">
          <button class="btn btn-primary" type="button" onclick="ajaxSave('assessment');">Save assessment</button>
        </div>
      </fieldset>
    </form>
    <button class="btn btn-primary" type="button" onclick="submitAllForms()">Save all</button>
  </div>
  <div class="col-md-4"></div>
</body>
